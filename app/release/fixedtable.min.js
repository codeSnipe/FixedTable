!function(e){var t,d,a,i,r={};r.sortDic={UP:"1",DOWN:"0"},r.createTable=function(){var t=e("<div class='table_fixed'></div>"),i=e("<div class='leftFixedCon'></div>"),l=e("<div class='leftFixed'><table cellpadding='0' cellspacing='0' border='0' class='left_top_table t_number marginBottom0 borderNone'></table></div>"),n=e("<div class='leftFixed' id='fx_leftFixed'><table cellpadding='0' cellspacing='0' border='0' class='left_bottom_table t_number marginBottom0 borderNone'></table></div>"),o=e("<div class='rightFixedCon'></div>"),h=e("<div class='rightFixed' id='fx_rightFixed'><div class='rightTableTop'><table cellpadding='0' cellspacing='0' border='0' class='right_top_table marginBottom0 borderTop0' style='border: none;'></div></div>"),s=e('<div class="rightTable" id="fx_rightTable"><table cellpadding="0" cellspacing="0" border="0" class="right_bottom_table table borderTop0 marginBottom0 borderNone"></table></div>');return s.scroll(function(){r.fixed()}),a.lockLine<=0?a.lockRow<=0?(o.append(s),t.append(o),t.find(".rightTable").css({display:"block","overflow-x":"scroll","border-left":"1px solid rgb(220,220,220)"}),t.css({border:"none"}),s.css({"border-top":"1px solid #dcdcdc"}),r.createWithNolock(t)):(o.append(h,s),t.append(o),t.find(".rightTable").css({display:"block"}),r.createWithLockRow(t)):a.lockRow<=0?(i.append(n),o.append(s),t.append(i,o),r.createWithLockLine(t)):(i.append(l,n),o.append(h,s),t.append(i,o),r.createWithLockAll(t)),d=t,t},r.createWithNolock=function(t){var d=e("<tbody></tbody>"),i=e("<tr class='fixedHeadColor'>");d.append(i);for(var l=0;l<a.head.length;l++){var n=a.head[l];i.append(r.createTD({msg:n.headTitle,field:n,head:!0}))}for(var o=0;o<a.data.length;o++){for(var h=a.data[o],s=e("<tr></tr>"),p=0;p<a.head.length;p++){var c=a.head[p];s.append(r.createTD({msg:h[c.dataField],field:c}))}d.append(s)}t.find(".right_bottom_table").append(d)},r.createWithLockLine=function(t){var d=t.find(".left_bottom_table"),i=t.find(".right_bottom_table"),l=e("<tbody></tbody>"),n=e("<tbody></tbody>");d.append(l),i.append(n);for(var o=e("<tr></tr>"),h=e("<tr class='fixedHeadColor'></tr>"),s=0;s<a.head.length;s++){var p=a.head[s];s<a.lockLine?o.append(r.createTD({msg:p.headTitle,field:p,head:!0})):h.append(r.createTD({msg:p.headTitle,field:p,head:!0}))}d.append(o),n.append(h);for(var c=0;c<a.data.length;c++){for(var f=a.data[c],b=e("<tr></tr>"),g=e("<tr></tr>"),v=0;v<a.head.length;v++){var x=a.head[v];v<a.lockLine?b.append(r.createTD({msg:f[x.dataField],field:x})):g.append(r.createTD({msg:f[x.dataField],field:x}))}d.append(b),n.append(g)}},r.createWithLockRow=function(t){var d=t.find(".right_top_table"),i=t.find(".right_bottom_table"),l=e("<tbody></tbody>"),n=e("<tbody></tbody>");d.append(l),i.append(n);for(var o=e("<tr></tr>"),h=0;h<a.head.length;h++){var s=a.head[h];o.append(r.createTD({msg:s.headTitle,field:s,head:!0}))}l.append(o);for(var p=0;p<a.data.length;p++){for(var c=a.data[p],f=e("<tr></tr>"),b=e("<tr></tr>"),g=0;g<a.head.length;g++){var v=a.head[g];p<a.lockRow-1?f.append(r.createTD({msg:c[v.dataField],field:v})):b.append(r.createTD({msg:c[v.dataField],field:v}))}l.append(f),n.append(b)}},r.createWithLockAll=function(t){var d=t.find(".left_top_table"),i=t.find(".left_bottom_table"),l=t.find(".right_top_table"),n=t.find(".right_bottom_table"),o=e("<tbody></tbody>"),h=e("<tbody></tbody>"),s=e("<tbody></tbody>"),p=e("<tbody></tbody>");d.append(o),i.append(h),l.append(s),n.append(p);for(var c=e("<tr></tr>"),f=e("<tr></tr>"),b=0;b<a.head.length;b++)b<a.lockLine?c.append(r.createTD({msg:a.head[b].headTitle,field:a.head[b],head:!0})):f.append(r.createTD({msg:a.head[b].headTitle,field:a.head[b],head:!0}));o.append(c),s.append(f);for(var g=0;g<a.data.length;g++){var v=a.data[g];if(g<a.lockRow-1){for(var x=e("<tr></tr>"),k=e("<tr></tr>"),w=0;w<a.head.length;w++){var m=a.head[w];w<a.lockLine?x.append(r.createTD({msg:v[m.dataField],field:m})):k.append(r.createTD({msg:v[m.dataField],field:m}))}o.append(x),s.append(k)}else{for(var u=e("<tr></tr>"),F=e("<tr></tr>"),T=0;T<a.head.length;T++){var _=a.head[T];T<a.lockLine?u.append(r.createTD({msg:v[_.dataField],field:_})):F.append(r.createTD({msg:v[_.dataField],field:_}))}h.append(u),p.append(F)}}},r.createTD=function(d){var l;if(void 0===d.msg&&(d.msg="--"),a.sort&&d.head?(l=e("<td class="+d.field.dataField+"><div class='tbHead tbSortDisabled'><span>"+d.msg+"</span></div></td>"),i&&i.sortField===d.field.dataField&&l.find("div").removeClass("tbSortDisabled").addClass(i.sortStatus==r.sortDic.DOWN?"tbSortDown":"tbSortUp"),l.on("click",function(){var l=e(this).find("div"),n={};n.sortField=d.field.dataField,l.hasClass("tbSortDisabled")?(t.find("td>div").removeClass("tbSortDown").removeClass("tbSortUp").addClass("tbSortDisabled"),l.removeClass("tbSortDisabled").addClass("tbSortDown"),n.sortStatus=r.sortDic.DOWN):l.hasClass("tbSortDown")?(l.removeClass("tbSortDown").addClass("tbSortUp"),n.sortStatus=r.sortDic.UP):(l.removeClass("tbSortUp").addClass("tbSortDown"),n.sortStatus=r.sortDic.DOWN),i=n,a.sortFunction(n)})):l=e("<td class="+d.field.dataField+"><span>"+d.msg+"</span></td>"),d.field.width&&(l.css({width:d.field.width-17+"px","max-width":d.field.width-17+"px"}),l.find("div").css({width:d.field.width-17+"px","max-width":d.field.width-17+"px"}),l.find("span").css({width:d.field.width-17+"px","max-width":d.field.width-17+"px"})),d.field.tip&&!d.head){l.attr("title",d.msg);try{e(l).poshytip()}catch(n){}}return l},r.fixed=function(){var t=e("#fx_rightTable").scrollTop(),d=e("#fx_rightTable").scrollLeft();e("#fx_leftFixed").scrollTop(t),e("#fx_rightFixed").scrollLeft(d)},r.setSize=function(){d.find(".rightFixedCon");for(var i=0,r=0;r<a.lockLine;r++)a.hasFilterHead?t.find(".checkChoose li").eq(r).find("input").prop("checked")&&(i+=a.head[r].width?a.head[r].width:67):i+=a.head[r].width?a.head[r].width:67;t.css({"min-width":i+167+"px"}),d.find(".rightFixedCon").width(t.width()-i),d.find("#fx_leftFixed").css({"max-height":a.maxHeight+"px"}),d.find("#fx_rightTable").css({"max-height":a.maxHeight+"px"});var l=0,n=0;if(a.lockRow>0){var o=0;if(a.hasFilterHead){for(var h=t.find(".checkChoose li"),s=a.lockLine;s<h.length;s++)if(t.find(".checkChoose li").eq(s).find("input").prop("checked"))for(var p=t.find(".checkChoose li").eq(s).find("input").attr("data-fliterflag"),c=0;c<a.head.length;c++)if(p==a.head[c].dataField){a.head[c].width?(o+=a.head[c].width,n+=a.head[c].width):(o+=167,l++);break}d.find("#fx_rightTable").width(o)}else{for(var r=a.lockLine;r<a.head.length;r++)o+=a.head[r].width?a.head[r].width:167;d.find("#fx_rightTable").width(o)}}if(d.find(".rightFixedCon").width()>o){for(var f=0,b=d.find(".rightFixedCon").width(),g=b-n,v=g/l,h=t.find(".checkChoose li"),s=a.lockLine;s<h.length;s++)if(t.find(".checkChoose li").eq(s).find("input").prop("checked"))for(var p=t.find(".checkChoose li").eq(s).find("input").attr("data-fliterflag"),c=0;c<a.head.length;c++)if(p==a.head[c].dataField){a.head[c].width?f+=a.head[c].width:(e("."+a.head[c].dataField).css({width:v+"px"}),e("."+a.head[c].dataField).find("span").width(parseInt(v-167+150)),f+=v);break}d.find("#fx_rightTable").width(f)}},r.createFilterHeader=function(){function t(){for(var t=o.find("input"),d=0,a=0;a<t.length;a++){var i=o.find("input").eq(a).attr("data-fliterFlag");o.find("input").eq(a).prop("checked")?(e("."+i).show(),d+=1):e("."+i).hide()}d==t.length?n.find("input").prop("checked",!0):n.find("input").prop("checked",!1),r.setSize()}for(var d=e("<div></div>"),i=e("<a class='filterBtn'>自定义表头</a>"),l=e("<div class='checkCon'></div>"),n=e('<div class="checkAll"><input type="checkbox" checked><span>全选</span></div>'),o=e("<ul class='checkChoose'></ul>"),h=0;h<a.head.length;h++){var s=a.head[h],p=e('<li><input checked data-fliterFlag="'+s.dataField+'" type="checkbox"><span>'+s.headTitle+"</span></li>");o.append(p),function(){var e=p;e.on("click",function(){t()})}()}return a.showHideFilterBtn?i.css({display:"inline-block"}):i.hide(),l.append(n,o),d.append(i,l),l.hide(),n.find("input").on("change",function(){e(this).prop("checked")?o.find("input").prop("checked",!0):o.find("input").prop("checked",!1),t()}),i.on("click",function(){l.is(":hidden")?l.show():l.hide()}),d},e.fn.fixedTable=function(d){a=e.extend({},e.fn.fixedTable.defaults,d),e(this).empty();var i=r.createFilterHeader(),l=r.createTable();a.hasFilterHead&&e(this).append(i),e(this).append(l),t=e(this),r.setSize(),e(window).on("resize",function(){r.setSize()})},e.fn.fixedTable.defaults={hasFilterHead:!1,showHideFilterBtn:!0,sort:!0,sortFunction:function(){},maxHeight:400,lockRow:1,lockLine:0,data:[],head:[]}}(jQuery);